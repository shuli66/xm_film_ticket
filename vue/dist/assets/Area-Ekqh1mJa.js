import{v as U,r as J,c as g,a as u,b as l,w as a,j as M,E as d,J as _,K as O,L as R,M as $,N as q,O as A,o as b,h as m,u as y,P as F,Q as I,R as j,T as K,V as L}from"./index-CwlnEuFy.js";/* empty css               *//* empty css                *//* empty css                  *//* empty css                   *//* empty css            *//* empty css               *//* empty css                  *//* empty css               *//* empty css                     *//* empty css                 *//* empty css                *//* empty css               *//* empty css              */import{r as p}from"./request--KQcSzqU.js";/* empty css                    */const Q={class:"card",style:{"margin-bottom":"5px"}},G={class:"card",style:{"margin-bottom":"5px"}},H={class:"card",style:{"margin-bottom":"5px"}},W={key:0,class:"card"},X={class:"dialog-footer"},ge={__name:"Area",setup(Y){const f=U(),e=J({formVisible:!1,form:{},tableData:[],pageNum:1,pageSize:8,total:0,title:null,ids:[],rules:{title:[{required:!0,message:"请输入区域名称",trigger:"blur"}]}}),i=()=>{p.get("/area/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,title:e.title}}).then(o=>{var t,n;o.code==="200"&&(e.tableData=((t=o.data)==null?void 0:t.list)||[],e.total=(n=o.data)==null?void 0:n.total)})},V=()=>{e.form={},e.formVisible=!0},C=o=>{e.form=JSON.parse(JSON.stringify(o)),e.formVisible=!0},x=()=>{p.post("/area/add",e.form).then(o=>{o.code==="200"?(d.success("操作成功"),e.formVisible=!1,i()):d.error(o.msg)})},k=()=>{p.put("/area/update",e.form).then(o=>{o.code==="200"&&(d.success("操作成功"),e.formVisible=!1,i())})},h=()=>{f.value.validate(o=>{o&&(e.form.id?k():x())})},v=o=>{_.confirm("删除后数据无法恢复，您确定删除吗？","删除确认",{type:"warning"}).then(t=>{p.delete("/area/delete/"+o).then(n=>{n.code==="200"?(d.success("删除成功"),i()):d.error(n.msg)})}).catch(t=>{console.error(t)})},w=()=>{if(!e.ids.length){d.warning("请选择数据");return}_.confirm("删除后数据无法恢复，您确定删除吗？","删除确认",{type:"warning"}).then(o=>{p.delete("/area/delete/batch",{data:e.ids}).then(t=>{t.code==="200"?(d.success("操作成功"),i()):d.error(t.msg)})}).catch(o=>{console.error(o)})},E=o=>{e.ids=o.map(t=>t.id)},N=()=>{e.title=null,i()};return i(),(o,t)=>{const n=O,s=R,c=j,S=$,z=q,B=K,D=L,P=A;return b(),g("div",null,[u("div",Q,[l(n,{modelValue:e.title,"onUpdate:modelValue":t[0]||(t[0]=r=>e.title=r),"prefix-icon":"Search",style:{width:"240px","margin-right":"10px"},placeholder:"请输入区域名称查询"},null,8,["modelValue"]),l(s,{type:"info",plain:"",onClick:i},{default:a(()=>t[5]||(t[5]=[m("查询")])),_:1}),l(s,{type:"warning",plain:"",style:{margin:"0 10px"},onClick:N},{default:a(()=>t[6]||(t[6]=[m("重置")])),_:1})]),u("div",G,[l(s,{type:"primary",plain:"",onClick:V},{default:a(()=>t[7]||(t[7]=[m("新增")])),_:1}),l(s,{type:"danger",plain:"",onClick:w},{default:a(()=>t[8]||(t[8]=[m("批量删除")])),_:1})]),u("div",H,[l(S,{stripe:"",data:e.tableData,onSelectionChange:E},{default:a(()=>[l(c,{type:"selection",width:"55"}),l(c,{prop:"title",label:"区域名称"}),l(c,{label:"操作",width:"100",fixed:"right"},{default:a(r=>[l(s,{type:"primary",circle:"",icon:y(F),onClick:T=>C(r.row)},null,8,["icon","onClick"]),l(s,{type:"danger",circle:"",icon:y(I),onClick:T=>v(r.row.id)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])]),e.total?(b(),g("div",W,[l(z,{onCurrentChange:i,background:"",layout:"prev, pager, next","page-size":e.pageSize,"current-page":e.pageNum,"onUpdate:currentPage":t[1]||(t[1]=r=>e.pageNum=r),total:e.total},null,8,["page-size","current-page","total"])])):M("",!0),l(P,{title:"区域信息",modelValue:e.formVisible,"onUpdate:modelValue":t[4]||(t[4]=r=>e.formVisible=r),width:"40%","destroy-on-close":""},{footer:a(()=>[u("span",X,[l(s,{onClick:t[3]||(t[3]=r=>e.formVisible=!1)},{default:a(()=>t[9]||(t[9]=[m("取 消")])),_:1}),l(s,{type:"primary",onClick:h},{default:a(()=>t[10]||(t[10]=[m("确 定")])),_:1})])]),default:a(()=>[l(D,{ref_key:"formRef",ref:f,rules:e.rules,model:e.form,"label-width":"80px",style:{padding:"20px"}},{default:a(()=>[l(B,{prop:"title",label:"区域名称"},{default:a(()=>[l(n,{modelValue:e.form.title,"onUpdate:modelValue":t[2]||(t[2]=r=>e.form.title=r),placeholder:"请输入区域名称"},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue"])])}}};export{ge as default};
