import{_ as j,r as q,v as C,y as A,c as p,a as e,b as o,w as n,W as F,j as f,E as V,m as $,A as G,O,Z as S,o as i,u as v,ak as U,F as W,z as Z,i as g,C as J,h as r,t as m,am as T,aq as K,ar as P,a6 as w,G as Q,L as R,an as X,H as tt,a8 as et}from"./index-DNfxLx3V.js";/* empty css                *//* empty css               *//* empty css                *//* empty css              *//* empty css                      *//* empty css             *//* empty css               *//* empty css            */import{r as st}from"./request-B9NmRS_H.js";const at={class:"notice-container"},ot={class:"notice-header"},nt={class:"notice-title"},it={class:"notice-content"},lt={class:"notice-card-header"},ct={class:"notice-card-title"},rt={class:"title-text"},dt={class:"notice-card-meta"},_t={class:"notice-card-time"},mt={class:"notice-card-content"},ut={class:"content-text"},pt={class:"notice-card-footer"},ft={key:0,class:"notice-empty"},vt={class:"notice-detail"},gt={class:"detail-header"},yt={class:"detail-meta"},ht={class:"detail-time"},kt={class:"detail-content"},wt={__name:"Notice",setup(Et){const l=q({noticeData:[],loading:!1}),y=C(!1),d=C(null),z=a=>{const t=["primary","success","warning","danger"];return t[a%t.length]},h=a=>a?w(a).format("YYYY-MM-DD HH:mm"):"",E=a=>{const t=w(a);return w().diff(t,"day")<=3},D=a=>{d.value=a,y.value=!0},M=async()=>{l.loading=!0;try{const a=await st.get("/notice/selectAll");a.code==="200"?l.noticeData=a.data.map(t=>({...t,important:Math.random()<.3})):V.error(a.msg)}catch{V.error("获取公告失败")}finally{l.loading=!1}};return A(()=>{M()}),(a,t)=>{var N;const _=$,k=Q,b=R,x=X,B=tt,Y=G,H=et,I=O,L=S;return i(),p("div",at,[e("div",ot,[e("div",nt,[o(_,{class:"notice-icon"},{default:n(()=>[o(v(U))]),_:1}),t[1]||(t[1]=e("span",null,"系统公告",-1))]),t[2]||(t[2]=e("div",{class:"notice-subtitle"},"及时了解最新动态",-1))]),F((i(),p("div",it,[o(Y,null,{default:n(()=>[(i(!0),p(W,null,Z(l.noticeData,(s,c)=>(i(),g(B,{key:c,timestamp:h(s.time),type:z(c),hollow:c%2===0,placement:"top",class:"notice-item"},{default:n(()=>[o(x,{class:J(["notice-card",{"notice-card-important":s.important,"notice-card-new":E(s.time)}]),onClick:u=>D(s)},{header:n(()=>[e("div",lt,[e("div",ct,[s.important?(i(),g(k,{key:0,type:"danger",size:"small",effect:"dark",class:"notice-tag"},{default:n(()=>t[3]||(t[3]=[r(" 重要 ")])),_:1})):f("",!0),E(s.time)?(i(),g(k,{key:1,type:"success",size:"small",effect:"light",class:"notice-tag"},{default:n(()=>t[4]||(t[4]=[r(" 新 ")])),_:1})):f("",!0),e("span",rt,m(s.title||"系统公告"),1)]),e("div",dt,[e("span",_t,[o(_,null,{default:n(()=>[o(v(T))]),_:1}),r(" "+m(h(s.time)),1)])])])]),default:n(()=>[e("div",mt,[e("div",ut,m(s.content),1),e("div",pt,[o(b,{type:"primary",size:"small",onClick:K(u=>D(s),["stop"])},{default:n(()=>[t[5]||(t[5]=r(" 查看详情 ")),o(_,{class:"el-icon--right"},{default:n(()=>[o(v(P))]),_:1})]),_:2},1032,["onClick"])])])]),_:2},1032,["class","onClick"])]),_:2},1032,["timestamp","type","hollow"]))),128))]),_:1}),l.noticeData.length===0&&!l.loading?(i(),p("div",ft,[o(H,{description:"暂无公告"})])):f("",!0)])),[[L,l.loading]]),o(I,{modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=s=>y.value=s),title:((N=d.value)==null?void 0:N.title)||"公告详情",width:"50%","close-on-click-modal":!1},{default:n(()=>{var s,c,u;return[e("div",vt,[e("div",gt,[e("div",yt,[e("span",ht,[o(_,null,{default:n(()=>[o(v(T))]),_:1}),r(" "+m(h((s=d.value)==null?void 0:s.time)),1)]),(c=d.value)!=null&&c.important?(i(),g(k,{key:0,type:"danger",size:"small",effect:"dark"},{default:n(()=>t[6]||(t[6]=[r(" 重要 ")])),_:1})):f("",!0)])]),e("div",kt,m((u=d.value)==null?void 0:u.content),1)])]}),_:1},8,["modelValue","title"])])}}},Yt=j(wt,[["__scopeId","data-v-df64965e"]]);export{Yt as default};
