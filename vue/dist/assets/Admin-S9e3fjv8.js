import{r as J,c as b,a as c,b as o,w as n,j as V,E as m,J as y,K as M,L as O,M as $,N as j,O as q,o as g,h as p,i as K,u as _,P as L,Q,R,S as G,T as H,U as W,V as X}from"./index-DNfxLx3V.js";/* empty css               *//* empty css                *//* empty css                  *//* empty css                 *//* empty css                   *//* empty css            *//* empty css               *//* empty css                  *//* empty css               *//* empty css                     *//* empty css                 *//* empty css                *//* empty css                     *//* empty css               *//* empty css              */import{r as f}from"./request-B9NmRS_H.js";/* empty css                    */import{f as Y}from"./api-YTng1EZn.js";const Z={class:"card",style:{"margin-bottom":"5px"}},ee={class:"card",style:{"margin-bottom":"5px"}},le={class:"card",style:{"margin-bottom":"5px"}},oe={key:0,class:"card"},te={class:"dialog-footer"},ke={__name:"Admin",setup(ae){const v=Y.uploadUrl,l=J({formVisible:!1,form:{},tableData:[],pageNum:1,pageSize:10,total:0,name:null,ids:[]}),s=()=>{f.get("/admin/selectPage",{params:{pageNum:l.pageNum,pageSize:l.pageSize,name:l.name}}).then(a=>{var e,r;a.code==="200"&&(l.tableData=((e=a.data)==null?void 0:e.list)||[],l.total=(r=a.data)==null?void 0:r.total)})},w=()=>{l.form={},l.formVisible=!0},x=a=>{l.form=JSON.parse(JSON.stringify(a)),l.formVisible=!0},h=()=>{f.post("/admin/add",l.form).then(a=>{a.code==="200"?(m.success("操作成功"),l.formVisible=!1,s()):m.error(a.msg)})},k=()=>{f.put("/admin/update",l.form).then(a=>{a.code==="200"&&(m.success("操作成功"),l.formVisible=!1,s())})},C=()=>{l.form.id?k():h()},E=a=>{y.confirm("删除后数据无法恢复，您确定删除吗？","删除确认",{type:"warning"}).then(e=>{f.delete("/admin/delete/"+a).then(r=>{r.code==="200"?(m.success("删除成功"),s()):m.error(r.msg)})}).catch(e=>{console.error(e)})},N=()=>{if(!l.ids.length){m.warning("请选择数据");return}y.confirm("删除后数据无法恢复，您确定删除吗？","删除确认",{type:"warning"}).then(a=>{f.delete("/admin/delete/batch",{data:l.ids}).then(e=>{e.code==="200"?(m.success("操作成功"),s()):m.error(e.msg)})}).catch(a=>{console.error(a)})},U=a=>{l.ids=a.map(e=>e.id)},S=a=>{l.form.avatar=a.data},B=()=>{l.name=null,s()};return s(),(a,e)=>{const r=M,i=O,d=R,z=G,D=$,P=j,u=H,T=W,A=X,F=q;return g(),b("div",null,[c("div",Z,[o(r,{modelValue:l.name,"onUpdate:modelValue":e[0]||(e[0]=t=>l.name=t),"prefix-icon":"Search",style:{width:"240px","margin-right":"10px"},placeholder:"请输入名称查询"},null,8,["modelValue"]),o(i,{type:"info",plain:"",onClick:s},{default:n(()=>e[8]||(e[8]=[p("查询")])),_:1}),o(i,{type:"warning",plain:"",style:{margin:"0 10px"},onClick:B},{default:n(()=>e[9]||(e[9]=[p("重置")])),_:1})]),c("div",ee,[o(i,{type:"primary",plain:"",onClick:w},{default:n(()=>e[10]||(e[10]=[p("新增")])),_:1}),o(i,{type:"danger",plain:"",onClick:N},{default:n(()=>e[11]||(e[11]=[p("批量删除")])),_:1})]),c("div",le,[o(D,{stripe:"",data:l.tableData,onSelectionChange:U},{default:n(()=>[o(d,{type:"selection",width:"55"}),o(d,{prop:"username",label:"账号"}),o(d,{prop:"avatar",label:"头像"},{default:n(t=>[t.row.avatar?(g(),K(z,{key:0,style:{width:"40px",height:"40px","border-radius":"50%",display:"block"},src:t.row.avatar,"preview-src-list":[t.row.avatar],"preview-teleported":""},null,8,["src","preview-src-list"])):V("",!0)]),_:1}),o(d,{prop:"name",label:"姓名"}),o(d,{prop:"role",label:"角色"}),o(d,{prop:"phone",label:"电话"}),o(d,{prop:"email",label:"邮箱"}),o(d,{label:"操作",width:"100",fixed:"right"},{default:n(t=>[o(i,{type:"primary",circle:"",icon:_(L),onClick:I=>x(t.row)},null,8,["icon","onClick"]),o(i,{type:"danger",circle:"",icon:_(Q),onClick:I=>E(t.row.id)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])]),l.total?(g(),b("div",oe,[o(P,{onCurrentChange:s,background:"",layout:"prev, pager, next","page-size":l.pageSize,"current-page":l.pageNum,"onUpdate:currentPage":e[1]||(e[1]=t=>l.pageNum=t),total:l.total},null,8,["page-size","current-page","total"])])):V("",!0),o(F,{title:"管理员信息",modelValue:l.formVisible,"onUpdate:modelValue":e[7]||(e[7]=t=>l.formVisible=t),width:"40%","destroy-on-close":""},{footer:n(()=>[c("span",te,[o(i,{onClick:e[6]||(e[6]=t=>l.formVisible=!1)},{default:n(()=>e[13]||(e[13]=[p("取 消")])),_:1}),o(i,{type:"primary",onClick:C},{default:n(()=>e[14]||(e[14]=[p("确 定")])),_:1})])]),default:n(()=>[o(A,{ref:"form",model:l.form,"label-width":"70px",style:{padding:"20px"}},{default:n(()=>[o(u,{prop:"username",label:"用户名"},{default:n(()=>[o(r,{modelValue:l.form.username,"onUpdate:modelValue":e[2]||(e[2]=t=>l.form.username=t),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),o(u,{prop:"avatar",label:"头像"},{default:n(()=>[o(T,{action:_(v),"on-success":S,"list-type":"picture"},{default:n(()=>[o(i,{type:"primary"},{default:n(()=>e[12]||(e[12]=[p("点击上传")])),_:1})]),_:1},8,["action"])]),_:1}),o(u,{prop:"name",label:"姓名"},{default:n(()=>[o(r,{modelValue:l.form.name,"onUpdate:modelValue":e[3]||(e[3]=t=>l.form.name=t),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),o(u,{prop:"phone",label:"电话"},{default:n(()=>[o(r,{modelValue:l.form.phone,"onUpdate:modelValue":e[4]||(e[4]=t=>l.form.phone=t),placeholder:"请输入电话"},null,8,["modelValue"])]),_:1}),o(u,{prop:"email",label:"邮箱"},{default:n(()=>[o(r,{modelValue:l.form.email,"onUpdate:modelValue":e[5]||(e[5]=t=>l.form.email=t),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}};export{ke as default};
