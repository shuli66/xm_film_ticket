import{r as v,c as f,a as c,b as a,w as s,j as _,E as p,J as b,K as E,L as S,M as B,N as V,o as d,h as g,i as z,u as I,Q as D,R as M,S as P}from"./index-CwlnEuFy.js";/* empty css                   *//* empty css            *//* empty css               *//* empty css                  *//* empty css               *//* empty css                     *//* empty css                 *//* empty css                *//* empty css                     *//* empty css               *//* empty css              */import{r as u}from"./request--KQcSzqU.js";/* empty css                    *//* empty css                */const T={class:"card",style:{"margin-bottom":"5px"}},U={class:"card",style:{"margin-bottom":"5px"}},j={class:"card",style:{"margin-bottom":"5px"}},q={key:0,class:"card"},ae={__name:"Score",setup(J){const t=v({tableData:[],pageNum:1,pageSize:5,total:0,filmName:null,ids:[]}),r=()=>{u.get("/score/selectPage",{params:{pageNum:t.pageNum,pageSize:t.pageSize,filmName:t.filmName}}).then(o=>{var e,n;o.code==="200"&&(t.tableData=((e=o.data)==null?void 0:e.list)||[],t.total=(n=o.data)==null?void 0:n.total)})},h=o=>{b.confirm("删除后数据无法恢复，您确定删除吗？","删除确认",{type:"warning"}).then(e=>{u.delete("/score/delete/"+o).then(n=>{n.code==="200"?(p.success("删除成功"),r()):p.error(n.msg)})}).catch(e=>{console.error(e)})},N=()=>{if(!t.ids.length){p.warning("请选择数据");return}b.confirm("删除后数据无法恢复，您确定删除吗？","删除确认",{type:"warning"}).then(o=>{u.delete("/score/delete/batch",{data:t.ids}).then(e=>{e.code==="200"?(p.success("操作成功"),r()):p.error(e.msg)})}).catch(o=>{console.error(o)})},w=o=>{t.ids=o.map(e=>e.id)},x=()=>{t.filmName=null,r()};return r(),(o,e)=>{const n=E,m=S,i=M,y=P,k=B,C=V;return d(),f("div",null,[c("div",T,[a(n,{modelValue:t.filmName,"onUpdate:modelValue":e[0]||(e[0]=l=>t.filmName=l),"prefix-icon":"Search",style:{width:"240px","margin-right":"10px"},placeholder:"请输入电影名称查询"},null,8,["modelValue"]),a(m,{type:"info",plain:"",onClick:r},{default:s(()=>e[2]||(e[2]=[g("查询")])),_:1}),a(m,{type:"warning",plain:"",style:{margin:"0 10px"},onClick:x},{default:s(()=>e[3]||(e[3]=[g("重置")])),_:1})]),c("div",U,[a(m,{type:"danger",plain:"",onClick:N},{default:s(()=>e[4]||(e[4]=[g("批量删除")])),_:1})]),c("div",j,[a(k,{stripe:"",data:t.tableData,onSelectionChange:w},{default:s(()=>[a(i,{type:"selection",width:"55"}),a(i,{prop:"userName",label:"用户姓名"}),a(i,{prop:"filmName",label:"电影名称"}),a(i,{prop:"filmImg",label:"电影图片"},{default:s(l=>[l.row.filmImg?(d(),z(y,{key:0,style:{width:"40px",height:"40px","border-radius":"5px",display:"block"},src:l.row.filmImg,"preview-src-list":[l.row.filmImg],"preview-teleported":""},null,8,["src","preview-src-list"])):_("",!0)]),_:1}),a(i,{prop:"score",label:"电影评分"}),a(i,{label:"操作",width:"100",fixed:"right"},{default:s(l=>[a(m,{type:"danger",circle:"",icon:I(D),onClick:K=>h(l.row.id)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])]),t.total?(d(),f("div",q,[a(C,{onCurrentChange:r,background:"",layout:"prev, pager, next","page-size":t.pageSize,"current-page":t.pageNum,"onUpdate:currentPage":e[1]||(e[1]=l=>t.pageNum=l),total:t.total},null,8,["page-size","current-page","total"])])):_("",!0)])}}};export{ae as default};
