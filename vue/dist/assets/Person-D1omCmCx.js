import{r as h,c as _,a as n,b as o,w as l,E as u,L as O,V as w,O as J,o as p,h as m,u as B,i as C,t as P,l as F,m as D,U as T,K as q,T as z,ai as K}from"./index-DNfxLx3V.js";/* empty css               *//* empty css                *//* empty css              *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css               */import{r as c}from"./request-B9NmRS_H.js";const L={style:{width:"40%",margin:"20px auto"},class:"card"},M={style:{"text-align":"right","padding-right":"20px"}},R={style:{"text-align":"center","margin-bottom":"20px"}},$=["src"],j={style:{color:"red"}},A={style:{"text-align":"center"}},G={class:"dialog-footer"},ae={__name:"Person",emits:["updateUser"],setup(H,{emit:g}){const V="http://8.130.169.157",e=h({user:JSON.parse(localStorage.getItem("xm-user")||"{}"),account:100,formVisible:!1});(()=>{c.get("/user/selectById/"+e.user.id).then(s=>{s.code==="200"?(e.user=s.data,localStorage.setItem("xm-user",JSON.stringify(e.user))):u.error(s.msg)})})();const x=s=>{e.user.avatar=s.data},y=g,b=()=>{c.put("/user/update",e.user).then(s=>{s.code==="200"?(u.success("保存成功"),localStorage.setItem("xm-user",JSON.stringify(e.user)),y("updateUser")):u.error(s.msg)})},v=()=>{e.formVisible=!0},S=()=>{let s=JSON.parse(JSON.stringify(e.user));s.account=e.account,c.post("/user/recharge",s).then(t=>{t.code==="200"?(u.success("操作成功"),localStorage.setItem("xm-user",JSON.stringify(t.data)),e.user=JSON.parse(localStorage.getItem("xm-user")||"{}"),e.formVisible=!1):u.error(t.msg)})};return(s,t)=>{const i=O,U=F("Plus"),E=D,N=T,d=q,r=z,f=w,I=K,k=J;return p(),_("div",L,[t[11]||(t[11]=n("div",{style:{"font-size":"20px",padding:"20px 20px"}},"个人资料",-1)),n("div",M,[o(i,{type:"info",onClick:v},{default:l(()=>t[7]||(t[7]=[m("充 值")])),_:1})]),o(f,{ref:"user",model:e.user,"label-width":"60px",style:{padding:"20px"}},{default:l(()=>[n("div",R,[o(N,{action:B(V)+"/files/upload","on-success":x,"show-file-list":!1,class:"avatar-uploader"},{default:l(()=>[e.user.avatar?(p(),_("img",{key:0,src:e.user.avatar,class:"avatar"},null,8,$)):(p(),C(E,{key:1,class:"avatar-uploader-icon"},{default:l(()=>[o(U)]),_:1}))]),_:1},8,["action"])]),o(r,{prop:"username",label:"用户名"},{default:l(()=>[o(d,{disabled:"",modelValue:e.user.username,"onUpdate:modelValue":t[0]||(t[0]=a=>e.user.username=a),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),o(r,{prop:"name",label:"姓名"},{default:l(()=>[o(d,{modelValue:e.user.name,"onUpdate:modelValue":t[1]||(t[1]=a=>e.user.name=a),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),o(r,{prop:"phone",label:"电话"},{default:l(()=>[o(d,{modelValue:e.user.phone,"onUpdate:modelValue":t[2]||(t[2]=a=>e.user.phone=a),placeholder:"请输入电话"},null,8,["modelValue"])]),_:1}),o(r,{prop:"email",label:"邮箱"},{default:l(()=>[o(d,{modelValue:e.user.email,"onUpdate:modelValue":t[3]||(t[3]=a=>e.user.email=a),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),o(r,{prop:"account",label:"余额"},{default:l(()=>[n("span",j,"￥ "+P(e.user.account),1)]),_:1}),n("div",A,[o(i,{type:"primary",onClick:b},{default:l(()=>t[8]||(t[8]=[m("保 存")])),_:1})])]),_:1},8,["model"]),o(k,{title:"充值信息",modelValue:e.formVisible,"onUpdate:modelValue":t[6]||(t[6]=a=>e.formVisible=a),width:"40%","destroy-on-close":""},{footer:l(()=>[n("span",G,[o(i,{onClick:t[5]||(t[5]=a=>e.formVisible=!1)},{default:l(()=>t[9]||(t[9]=[m("取 消")])),_:1}),o(i,{type:"primary",onClick:S},{default:l(()=>t[10]||(t[10]=[m("确 定")])),_:1})])]),default:l(()=>[o(f,{ref:"form","label-width":"70px",style:{padding:"20px"}},{default:l(()=>[o(r,{prop:"account",label:"充值金额"},{default:l(()=>[o(I,{modelValue:e.account,"onUpdate:modelValue":t[4]||(t[4]=a=>e.account=a),min:100,step:1,precision:2},null,8,["modelValue"])]),_:1})]),_:1},512)]),_:1},8,["modelValue"])])}}};export{ae as default};
