import{r as R,c as S,a as g,b as e,w as a,j as p,E as b,J as B,K as H,L as W,M as X,N as Y,O as Z,o as m,h as n,t as d,i as _,u as y,ab as ee,ac as te,P as le,Q as ae,R as oe,ad as re,ae as ne,S as ie,G as se,af as de,T as ue,U as me,V as pe}from"./index-CwlnEuFy.js";/* empty css               *//* empty css                *//* empty css                  *//* empty css                 *//* empty css                   *//* empty css            *//* empty css               *//* empty css                  *//* empty css               *//* empty css                     *//* empty css                 *//* empty css                *//* empty css                          *//* empty css                     *//* empty css                *//* empty css               *//* empty css              */import{r as V}from"./request--KQcSzqU.js";/* empty css                    */const ce={class:"card",style:{"margin-bottom":"5px"}},fe={class:"card",style:{"margin-bottom":"5px"}},_e={class:"card",style:{"margin-bottom":"5px"}},we={style:{width:"80px"},class:"line1"},be={style:{width:"50px"},class:"line1"},ye={key:0,class:"card"},ge={class:"dialog-footer"},je={__name:"Cinema",setup(ve){const h="http://8.130.169.157",o=R({formVisible:!1,form:{},tableData:[],pageNum:1,pageSize:10,total:0,name:null,ids:[]}),U=(r,l)=>{o.form=JSON.parse(JSON.stringify(r)),o.form.status=l,N()},w=()=>{V.get("/cinema/selectPage",{params:{pageNum:o.pageNum,pageSize:o.pageSize,name:o.name}}).then(r=>{var l,i;r.code==="200"&&(o.tableData=((l=r.data)==null?void 0:l.list)||[],o.total=(i=r.data)==null?void 0:i.total)})},D=()=>{o.form={},o.formVisible=!0},z=r=>{o.form=JSON.parse(JSON.stringify(r)),o.formVisible=!0},J=()=>{V.post("/cinema/add",o.form).then(r=>{r.code==="200"?(b.success("操作成功"),o.formVisible=!1,w()):b.error(r.msg)})},N=()=>{V.put("/cinema/update",o.form).then(r=>{r.code==="200"&&(b.success("操作成功"),o.formVisible=!1,w())})},O=()=>{o.form.id?N():J()},P=r=>{B.confirm("删除后数据无法恢复，您确定删除吗？","删除确认",{type:"warning"}).then(l=>{V.delete("/cinema/delete/"+r).then(i=>{i.code==="200"?(b.success("删除成功"),w()):b.error(i.msg)})}).catch(l=>{console.error(l)})},T=()=>{if(!o.ids.length){b.warning("请选择数据");return}B.confirm("删除后数据无法恢复，您确定删除吗？","删除确认",{type:"warning"}).then(r=>{V.delete("/cinema/delete/batch",{data:o.ids}).then(l=>{l.code==="200"?(b.success("操作成功"),w()):b.error(l.msg)})}).catch(r=>{console.error(r)})},$=r=>{o.ids=r.map(l=>l.id)},F=r=>{o.form.avatar=r.data},I=r=>{o.form.front=r.data},M=r=>{o.form.back=r.data},j=r=>{o.form.certificate=r.data},q=()=>{o.name=null,w()};return w(),(r,l)=>{const i=H,s=W,c=oe,u=re,C=ne,k=ie,v=se,A=de,G=X,K=Y,f=ue,x=me,L=pe,Q=Z;return m(),S("div",null,[g("div",ce,[e(i,{modelValue:o.name,"onUpdate:modelValue":l[0]||(l[0]=t=>o.name=t),"prefix-icon":"Search",style:{width:"240px","margin-right":"10px"},placeholder:"请输入名称查询"},null,8,["modelValue"]),e(s,{type:"info",plain:"",onClick:w},{default:a(()=>l[11]||(l[11]=[n("查询")])),_:1}),e(s,{type:"warning",plain:"",style:{margin:"0 10px"},onClick:q},{default:a(()=>l[12]||(l[12]=[n("重置")])),_:1})]),g("div",fe,[e(s,{type:"primary",plain:"",onClick:D},{default:a(()=>l[13]||(l[13]=[n("新增")])),_:1}),e(s,{type:"danger",plain:"",onClick:T},{default:a(()=>l[14]||(l[14]=[n("批量删除")])),_:1})]),g("div",_e,[e(G,{stripe:"",data:o.tableData,onSelectionChange:$},{default:a(()=>[e(c,{type:"selection",width:"55"}),e(c,{type:"expand"},{default:a(t=>[e(A,{class:"margin-top",title:"影院信息",column:5,border:""},{default:a(()=>[e(u,{label:"账号"},{default:a(()=>[n(d(t.row.username),1)]),_:2},1024),e(u,{label:"电影院名称"},{default:a(()=>[e(C,{placement:"top-start",title:"影院名称",width:200,trigger:"hover",content:t.row.name},{reference:a(()=>[n(d(t.row.name),1)]),_:2},1032,["content"])]),_:2},1024),e(u,{label:"头像"},{default:a(()=>[t.row.avatar?(m(),_(k,{key:0,style:{width:"40px",height:"40px",display:"block"},src:t.row.avatar,"preview-src-list":[t.row.avatar],"preview-teleported":""},null,8,["src","preview-src-list"])):p("",!0)]),_:2},1024),e(u,{label:"手机号"},{label:a(()=>l[15]||(l[15]=[g("div",{class:"cell-item"}," 手机号 ",-1)])),default:a(()=>[n(d(t.row.phone),1)]),_:2},1024),e(u,{label:"邮箱"},{default:a(()=>[n(d(t.row.email),1)]),_:2},1024),e(u,{label:"影院地址"},{default:a(()=>[e(C,{placement:"top-start",title:"影院地址",width:200,trigger:"hover",content:t.row.address},{reference:a(()=>[g("div",we,d(t.row.address),1)]),_:2},1032,["content"])]),_:2},1024),e(u,{label:"负责人"},{default:a(()=>[n(d(t.row.leader),1)]),_:2},1024),e(u,{label:"身份证号"},{default:a(()=>[e(C,{placement:"top-start",title:"身份证号",width:200,trigger:"hover",content:t.row.code},{reference:a(()=>[g("div",be,d(t.row.code),1)]),_:2},1032,["content"])]),_:2},1024),e(u,{label:"身份证正面"},{default:a(()=>[t.row.front?(m(),_(k,{key:0,style:{width:"40px",height:"40px",display:"block"},src:t.row.front,"preview-src-list":[t.row.front],"preview-teleported":""},null,8,["src","preview-src-list"])):p("",!0)]),_:2},1024),e(u,{label:"身份证反面"},{default:a(()=>[t.row.back?(m(),_(k,{key:0,style:{width:"40px",height:"40px",display:"block"},src:t.row.back,"preview-src-list":[t.row.back],"preview-teleported":""},null,8,["src","preview-src-list"])):p("",!0)]),_:2},1024),e(u,{label:"营业执照"},{default:a(()=>[t.row.certificate?(m(),_(k,{key:0,style:{width:"40px",height:"40px",display:"block"},src:t.row.certificate,"preview-src-list":[t.row.certificate],"preview-teleported":""},null,8,["src","preview-src-list"])):p("",!0)]),_:2},1024),e(u,{label:"审核状态"},{default:a(()=>[t.row.status==="待审核"?(m(),_(v,{key:0,type:"warning"},{default:a(()=>[n(d(t.row.status),1)]),_:2},1024)):p("",!0),t.row.status==="审核通过"?(m(),_(v,{key:1,type:"success"},{default:a(()=>[n(d(t.row.status),1)]),_:2},1024)):p("",!0),t.row.status==="审核拒绝"?(m(),_(v,{key:2,type:"danger"},{default:a(()=>[n(d(t.row.status),1)]),_:2},1024)):p("",!0)]),_:2},1024),e(u,{label:"角色"},{default:a(()=>[n(d(t.row.role),1)]),_:2},1024)]),_:2},1024)]),_:1}),e(c,{prop:"username",label:"账号"}),e(c,{prop:"avatar",label:"头像"},{default:a(t=>[t.row.avatar?(m(),_(k,{key:0,style:{width:"40px",height:"40px","border-radius":"50%",display:"block"},src:t.row.avatar,"preview-src-list":[t.row.avatar],"preview-teleported":""},null,8,["src","preview-src-list"])):p("",!0)]),_:1}),e(c,{prop:"name",label:"影院名称"}),e(c,{prop:"phone",label:"电话"}),e(c,{prop:"email",label:"邮箱"}),e(c,{prop:"address",label:"地址"}),e(c,{prop:"status",label:"审核状态"},{default:a(t=>[t.row.status==="待审核"?(m(),_(v,{key:0,type:"warning"},{default:a(()=>[n(d(t.row.status),1)]),_:2},1024)):p("",!0),t.row.status==="审核通过"?(m(),_(v,{key:1,type:"success"},{default:a(()=>[n(d(t.row.status),1)]),_:2},1024)):p("",!0),t.row.status==="审核拒绝"?(m(),_(v,{key:2,type:"danger"},{default:a(()=>[n(d(t.row.status),1)]),_:2},1024)):p("",!0)]),_:1}),e(c,{prop:"role",label:"角色"}),e(c,{label:"操作",width:"200",fixed:"right"},{default:a(t=>[e(s,{type:"success",circle:"",icon:y(ee),onClick:E=>U(t.row,"审核通过")},null,8,["icon","onClick"]),e(s,{type:"info",circle:"",icon:y(te),onClick:E=>U(t.row,"审核拒绝")},null,8,["icon","onClick"]),e(s,{type:"primary",circle:"",icon:y(le),onClick:E=>z(t.row)},null,8,["icon","onClick"]),e(s,{type:"danger",circle:"",icon:y(ae),onClick:E=>P(t.row.id)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])]),o.total?(m(),S("div",ye,[e(K,{onCurrentChange:w,background:"",layout:"prev, pager, next","page-size":o.pageSize,"current-page":o.pageNum,"onUpdate:currentPage":l[1]||(l[1]=t=>o.pageNum=t),total:o.total},null,8,["page-size","current-page","total"])])):p("",!0),e(Q,{title:"影院信息",modelValue:o.formVisible,"onUpdate:modelValue":l[10]||(l[10]=t=>o.formVisible=t),width:"50%","destroy-on-close":""},{footer:a(()=>[g("span",ge,[e(s,{onClick:l[9]||(l[9]=t=>o.formVisible=!1)},{default:a(()=>l[20]||(l[20]=[n("取 消")])),_:1}),e(s,{type:"primary",onClick:O},{default:a(()=>l[21]||(l[21]=[n("确 定")])),_:1})])]),default:a(()=>[e(L,{ref:"form",model:o.form,"label-width":"85px",style:{padding:"20px"}},{default:a(()=>[e(f,{prop:"username",label:"用户名"},{default:a(()=>[e(i,{modelValue:o.form.username,"onUpdate:modelValue":l[2]||(l[2]=t=>o.form.username=t),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),e(f,{prop:"avatar",label:"头像"},{default:a(()=>[e(x,{action:y(h)+"/files/upload","on-success":F,"list-type":"picture"},{default:a(()=>[e(s,{type:"primary"},{default:a(()=>l[16]||(l[16]=[n("点击上传")])),_:1})]),_:1},8,["action"])]),_:1}),e(f,{prop:"name",label:"名称"},{default:a(()=>[e(i,{modelValue:o.form.name,"onUpdate:modelValue":l[3]||(l[3]=t=>o.form.name=t),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),e(f,{prop:"phone",label:"电话"},{default:a(()=>[e(i,{modelValue:o.form.phone,"onUpdate:modelValue":l[4]||(l[4]=t=>o.form.phone=t),placeholder:"请输入电话"},null,8,["modelValue"])]),_:1}),e(f,{prop:"email",label:"邮箱"},{default:a(()=>[e(i,{modelValue:o.form.email,"onUpdate:modelValue":l[5]||(l[5]=t=>o.form.email=t),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),e(f,{prop:"address",label:"地址"},{default:a(()=>[e(i,{type:"textarea",rows:4,modelValue:o.form.address,"onUpdate:modelValue":l[6]||(l[6]=t=>o.form.address=t),placeholder:"请输入地址"},null,8,["modelValue"])]),_:1}),e(f,{prop:"leader",label:"负责人"},{default:a(()=>[e(i,{modelValue:o.form.leader,"onUpdate:modelValue":l[7]||(l[7]=t=>o.form.leader=t),placeholder:"请输入负责人姓名"},null,8,["modelValue"])]),_:1}),e(f,{prop:"code",label:"身份证号"},{default:a(()=>[e(i,{modelValue:o.form.code,"onUpdate:modelValue":l[8]||(l[8]=t=>o.form.code=t),placeholder:"请输入负责人身份证号"},null,8,["modelValue"])]),_:1}),e(f,{prop:"front",label:"身份证正面"},{default:a(()=>[e(x,{action:y(h)+"/files/upload","on-success":I,"list-type":"picture"},{default:a(()=>[e(s,{type:"primary"},{default:a(()=>l[17]||(l[17]=[n("上传负责人身份证正面")])),_:1})]),_:1},8,["action"])]),_:1}),e(f,{prop:"back",label:"身份证反面"},{default:a(()=>[e(x,{action:y(h)+"/files/upload","on-success":M,"list-type":"picture"},{default:a(()=>[e(s,{type:"primary"},{default:a(()=>l[18]||(l[18]=[n("上传负责人身份证反面")])),_:1})]),_:1},8,["action"])]),_:1}),e(f,{prop:"certificate",label:"营业执照"},{default:a(()=>[e(x,{action:y(h)+"/files/upload","on-success":j,"list-type":"picture"},{default:a(()=>[e(s,{type:"primary"},{default:a(()=>l[19]||(l[19]=[n("上传影院的营业执照")])),_:1})]),_:1},8,["action"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}};export{je as default};
