import{_ as x,r as g,c as m,a as l,b as o,w as s,V as I,o as d,u as k,i as N,h as w,E as p,l as y,m as B,U as S,T as P,K as C,L as F}from"./index-DNfxLx3V.js";/* empty css                  *//* empty css               *//* empty css              *//* empty css                 */import{r as A}from"./request-B9NmRS_H.js";import{f as J}from"./api-YTng1EZn.js";const M={class:"person-container"},O={class:"profile-card"},T={class:"avatar-section"},q={class:"avatar-wrapper"},D=["src"],K={class:"form-content"},L={class:"form-actions"},j={__name:"Person",emits:["updateUser"],setup(z,{emit:i}){const a=g({user:JSON.parse(localStorage.getItem("xm-user")||"{}")}),c=J.uploadUrl,_=n=>{a.user.avatar=n.data,p.success("头像上传成功")},f=i,v=()=>{let n=a.user.role==="ADMIN"?"/admin/update":"/cinema/update";A.put(n,a.user).then(e=>{e.code==="200"?(p.success("保存成功"),localStorage.setItem("xm-user",JSON.stringify(a.user)),f("updateUser")):p.error(e.msg)})};return(n,e)=>{const V=y("Plus"),U=B,h=S,r=P,u=C,b=F,E=I;return d(),m("div",M,[l("div",O,[e[6]||(e[6]=l("div",{class:"card-header"},[l("h2",null,"个人资料"),l("p",null,"您可以在这里更新您的个人信息")],-1)),o(E,{ref:"user",model:a.user,"label-width":"80px",class:"profile-form"},{default:s(()=>[l("div",T,[o(r,{prop:"avatar",label:"头像"},{default:s(()=>[o(h,{action:k(c),"on-success":_,"filmShow-file-list":!1,class:"avatar-uploader"},{default:s(()=>[l("div",q,[a.user.avatar?(d(),m("img",{key:0,src:a.user.avatar,class:"avatar"},null,8,D)):(d(),N(U,{key:1,class:"avatar-uploader-icon"},{default:s(()=>[o(V)]),_:1})),e[4]||(e[4]=l("div",{class:"avatar-hover"},[l("div",null,"更换头像")],-1))])]),_:1},8,["action"])]),_:1})]),l("div",K,[o(r,{prop:"username",label:"用户名"},{default:s(()=>[o(u,{disabled:"",modelValue:a.user.username,"onUpdate:modelValue":e[0]||(e[0]=t=>a.user.username=t),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),o(r,{prop:"name",label:"名称"},{default:s(()=>[o(u,{modelValue:a.user.name,"onUpdate:modelValue":e[1]||(e[1]=t=>a.user.name=t),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),o(r,{prop:"phone",label:"电话"},{default:s(()=>[o(u,{modelValue:a.user.phone,"onUpdate:modelValue":e[2]||(e[2]=t=>a.user.phone=t),placeholder:"请输入电话"},null,8,["modelValue"])]),_:1}),o(r,{prop:"email",label:"邮箱"},{default:s(()=>[o(u,{modelValue:a.user.email,"onUpdate:modelValue":e[3]||(e[3]=t=>a.user.email=t),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),l("div",L,[o(b,{type:"primary",onClick:v},{default:s(()=>e[5]||(e[5]=[w("保存修改")])),_:1})])])]),_:1},8,["model"])])])}}},Z=x(j,[["__scopeId","data-v-c11ae114"]]);export{Z as default};
