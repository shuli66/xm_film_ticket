import{v as U,r as J,c as g,a as u,b as l,w as a,j as M,E as d,J as _,K as O,L as R,M as $,N as q,O as F,o as y,h as p,u as b,P as I,Q as j,R as A,T as K,V as L}from"./index-DNfxLx3V.js";/* empty css               *//* empty css                *//* empty css                  *//* empty css                   *//* empty css            *//* empty css               *//* empty css                  *//* empty css               *//* empty css                     *//* empty css                 *//* empty css                *//* empty css               *//* empty css              */import{r as m}from"./request-B9NmRS_H.js";/* empty css                    */const Q={class:"card",style:{"margin-bottom":"5px"}},G={class:"card",style:{"margin-bottom":"5px"}},H={class:"card",style:{"margin-bottom":"5px"}},W={key:0,class:"card"},X={class:"dialog-footer"},ge={__name:"Type",setup(Y){const f=U(),e=J({formVisible:!1,form:{},tableData:[],pageNum:1,pageSize:8,total:0,title:null,ids:[],rules:{title:[{required:!0,message:"请输入分类名称",trigger:"blur"}]}}),n=()=>{m.get("/type/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,title:e.title}}).then(o=>{var t,r;o.code==="200"&&(e.tableData=((t=o.data)==null?void 0:t.list)||[],e.total=(r=o.data)==null?void 0:r.total)})},V=()=>{e.form={},e.formVisible=!0},C=o=>{e.form=JSON.parse(JSON.stringify(o)),e.formVisible=!0},x=()=>{m.post("/type/add",e.form).then(o=>{o.code==="200"?(d.success("操作成功"),e.formVisible=!1,n()):d.error(o.msg)})},k=()=>{m.put("/type/update",e.form).then(o=>{o.code==="200"&&(d.success("操作成功"),e.formVisible=!1,n())})},h=()=>{f.value.validate(o=>{o&&(e.form.id?k():x())})},v=o=>{_.confirm("删除后数据无法恢复，您确定删除吗？","删除确认",{type:"warning"}).then(t=>{m.delete("/type/delete/"+o).then(r=>{r.code==="200"?(d.success("删除成功"),n()):d.error(r.msg)})}).catch(t=>{console.error(t)})},w=()=>{if(!e.ids.length){d.warning("请选择数据");return}_.confirm("删除后数据无法恢复，您确定删除吗？","删除确认",{type:"warning"}).then(o=>{m.delete("/type/delete/batch",{data:e.ids}).then(t=>{t.code==="200"?(d.success("操作成功"),n()):d.error(t.msg)})}).catch(o=>{console.error(o)})},E=o=>{e.ids=o.map(t=>t.id)},N=()=>{e.title=null,n()};return n(),(o,t)=>{const r=O,s=R,c=A,S=$,z=q,B=K,T=L,D=F;return y(),g("div",null,[u("div",Q,[l(r,{modelValue:e.title,"onUpdate:modelValue":t[0]||(t[0]=i=>e.title=i),"prefix-icon":"Search",style:{width:"240px","margin-right":"10px"},placeholder:"请输入分类名称查询"},null,8,["modelValue"]),l(s,{type:"info",plain:"",onClick:n},{default:a(()=>t[5]||(t[5]=[p("查询")])),_:1}),l(s,{type:"warning",plain:"",style:{margin:"0 10px"},onClick:N},{default:a(()=>t[6]||(t[6]=[p("重置")])),_:1})]),u("div",G,[l(s,{type:"primary",plain:"",onClick:V},{default:a(()=>t[7]||(t[7]=[p("新增")])),_:1}),l(s,{type:"danger",plain:"",onClick:w},{default:a(()=>t[8]||(t[8]=[p("批量删除")])),_:1})]),u("div",H,[l(S,{stripe:"",data:e.tableData,onSelectionChange:E},{default:a(()=>[l(c,{type:"selection",width:"55"}),l(c,{prop:"title",label:"分类名称"}),l(c,{label:"操作",width:"100",fixed:"right"},{default:a(i=>[l(s,{type:"primary",circle:"",icon:b(I),onClick:P=>C(i.row)},null,8,["icon","onClick"]),l(s,{type:"danger",circle:"",icon:b(j),onClick:P=>v(i.row.id)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])]),e.total?(y(),g("div",W,[l(z,{onCurrentChange:n,background:"",layout:"prev, pager, next","page-size":e.pageSize,"current-page":e.pageNum,"onUpdate:currentPage":t[1]||(t[1]=i=>e.pageNum=i),total:e.total},null,8,["page-size","current-page","total"])])):M("",!0),l(D,{title:"分类信息",modelValue:e.formVisible,"onUpdate:modelValue":t[4]||(t[4]=i=>e.formVisible=i),width:"40%","destroy-on-close":""},{footer:a(()=>[u("span",X,[l(s,{onClick:t[3]||(t[3]=i=>e.formVisible=!1)},{default:a(()=>t[9]||(t[9]=[p("取 消")])),_:1}),l(s,{type:"primary",onClick:h},{default:a(()=>t[10]||(t[10]=[p("确 定")])),_:1})])]),default:a(()=>[l(T,{ref_key:"formRef",ref:f,rules:e.rules,model:e.form,"label-width":"80px",style:{padding:"20px"}},{default:a(()=>[l(B,{prop:"title",label:"分类名称"},{default:a(()=>[l(r,{modelValue:e.form.title,"onUpdate:modelValue":t[2]||(t[2]=i=>e.form.title=i),placeholder:"请输入分类名称"},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue"])])}}};export{ge as default};
