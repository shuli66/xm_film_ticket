import{r as q,c as V,a as w,b as o,w as a,j as f,E as d,J as E,K as G,L as K,M as Q,N as R,O as H,o as i,h as n,i as c,t as v,u as k,P as W,Q as X,F as Y,z as Z,R as ee,S as le,G as te,I as oe,B as ae,T as re,U as ne,V as ie}from"./index-CwlnEuFy.js";/* empty css               *//* empty css                *//* empty css                  *//* empty css                 *//* empty css            *//* empty css               *//* empty css                  *//* empty css               *//* empty css                   *//* empty css                     *//* empty css                 *//* empty css                *//* empty css                     *//* empty css               *//* empty css              */import{r as g}from"./request--KQcSzqU.js";/* empty css                    */const se={class:"card",style:{"margin-bottom":"5px"}},de={class:"card",style:{"margin-bottom":"5px"}},me={class:"card",style:{"margin-bottom":"5px"}},pe={key:0,class:"card"},ue={class:"dialog-footer"},De={__name:"Actor",setup(fe){const C="http://8.130.169.157",e=q({formVisible:!1,form:{},tableData:[],pageNum:1,pageSize:10,total:0,name:null,ids:[],filmData:[]}),N=()=>{g.get("/film/selectAll").then(r=>{r.code==="200"?e.filmData=r.data:d.error(r.msg)})},m=()=>{g.get("/actor/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,name:e.name}}).then(r=>{var l,p;r.code==="200"&&(e.tableData=((l=r.data)==null?void 0:l.list)||[],e.total=(p=r.data)==null?void 0:p.total)})},S=()=>{e.form={},e.formVisible=!0},I=r=>{e.form=JSON.parse(JSON.stringify(r)),e.formVisible=!0},U=()=>{g.post("/actor/add",e.form).then(r=>{r.code==="200"?(d.success("操作成功"),e.formVisible=!1,m()):d.error(r.msg)})},B=()=>{g.put("/actor/update",e.form).then(r=>{r.code==="200"&&(d.success("操作成功"),e.formVisible=!1,m())})},D=()=>{e.form.id?B():U()},z=r=>{E.confirm("删除后数据无法恢复，您确定删除吗？","删除确认",{type:"warning"}).then(l=>{g.delete("/actor/delete/"+r).then(p=>{p.code==="200"?(d.success("删除成功"),m()):d.error(p.msg)})}).catch(l=>{console.error(l)})},F=()=>{if(!e.ids.length){d.warning("请选择数据");return}E.confirm("删除后数据无法恢复，您确定删除吗？","删除确认",{type:"warning"}).then(r=>{g.delete("/actor/delete/batch",{data:e.ids}).then(l=>{l.code==="200"?(d.success("操作成功"),m()):d.error(l.msg)})}).catch(r=>{console.error(r)})},T=r=>{e.ids=r.map(l=>l.id)},O=()=>{e.name=null,m()},P=r=>{e.form.avatar=r.data};return m(),N(),(r,l)=>{const p=G,s=K,u=ee,x=le,b=te,A=Q,J=R,_=oe,h=ae,y=re,M=ne,$=ie,L=H;return i(),V("div",null,[w("div",se,[o(p,{modelValue:e.name,"onUpdate:modelValue":l[0]||(l[0]=t=>e.name=t),"prefix-icon":"Search",style:{width:"240px","margin-right":"10px"},placeholder:"请输入人员姓名查询"},null,8,["modelValue"]),o(s,{type:"info",plain:"",onClick:m},{default:a(()=>l[7]||(l[7]=[n("查询")])),_:1}),o(s,{type:"warning",plain:"",style:{margin:"0 10px"},onClick:O},{default:a(()=>l[8]||(l[8]=[n("重置")])),_:1})]),w("div",de,[o(s,{type:"primary",plain:"",onClick:S},{default:a(()=>l[9]||(l[9]=[n("新增")])),_:1}),o(s,{type:"danger",plain:"",onClick:F},{default:a(()=>l[10]||(l[10]=[n("批量删除")])),_:1})]),w("div",me,[o(A,{stripe:"",data:e.tableData,onSelectionChange:T},{default:a(()=>[o(u,{type:"selection",width:"55"}),o(u,{prop:"filmName",label:"电影名称"}),o(u,{prop:"filmImg",label:"电影封面"},{default:a(t=>[t.row.filmImg?(i(),c(x,{key:0,style:{width:"40px",height:"40px","border-radius":"5px",display:"block"},src:t.row.filmImg,"preview-src-list":[t.row.filmImg],"preview-teleported":""},null,8,["src","preview-src-list"])):f("",!0)]),_:1}),o(u,{prop:"name",label:"人员姓名"}),o(u,{prop:"avatar",label:"人员头像"},{default:a(t=>[t.row.avatar?(i(),c(x,{key:0,style:{width:"40px",height:"40px","border-radius":"5px",display:"block"},src:t.row.avatar,"preview-src-list":[t.row.avatar],"preview-teleported":""},null,8,["src","preview-src-list"])):f("",!0)]),_:1}),o(u,{prop:"role",label:"演职角色"},{default:a(t=>[t.row.role==="演员"?(i(),c(b,{key:0,type:"warning"},{default:a(()=>[n(v(t.row.role),1)]),_:2},1024)):f("",!0),t.row.role==="主演"?(i(),c(b,{key:1,type:"success"},{default:a(()=>[n(v(t.row.role),1)]),_:2},1024)):f("",!0),t.row.role==="导演"?(i(),c(b,{key:2,type:"danger"},{default:a(()=>[n(v(t.row.role),1)]),_:2},1024)):f("",!0),t.row.role==="编剧"?(i(),c(b,{key:3,type:"info"},{default:a(()=>[n(v(t.row.role),1)]),_:2},1024)):f("",!0)]),_:1}),o(u,{label:"操作",width:"100",fixed:"right"},{default:a(t=>[o(s,{type:"primary",circle:"",icon:k(W),onClick:j=>I(t.row)},null,8,["icon","onClick"]),o(s,{type:"danger",circle:"",icon:k(X),onClick:j=>z(t.row.id)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])]),e.total?(i(),V("div",pe,[o(J,{onCurrentChange:m,background:"",layout:"prev, pager, next","page-size":e.pageSize,"current-page":e.pageNum,"onUpdate:currentPage":l[1]||(l[1]=t=>e.pageNum=t),total:e.total},null,8,["page-size","current-page","total"])])):f("",!0),o(L,{title:"演职人员信息",modelValue:e.formVisible,"onUpdate:modelValue":l[6]||(l[6]=t=>e.formVisible=t),width:"40%","destroy-on-close":""},{footer:a(()=>[w("span",ue,[o(s,{onClick:l[5]||(l[5]=t=>e.formVisible=!1)},{default:a(()=>l[12]||(l[12]=[n("取 消")])),_:1}),o(s,{type:"primary",onClick:D},{default:a(()=>l[13]||(l[13]=[n("确 定")])),_:1})])]),default:a(()=>[o($,{ref:"form",model:e.form,"label-width":"70px",style:{padding:"20px"}},{default:a(()=>[o(y,{prop:"filmId",label:"选择电影"},{default:a(()=>[o(h,{modelValue:e.form.filmId,"onUpdate:modelValue":l[2]||(l[2]=t=>e.form.filmId=t),placeholder:"请选择电影"},{default:a(()=>[(i(!0),V(Y,null,Z(e.filmData,t=>(i(),c(_,{key:t.id,label:t.title,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(y,{prop:"name",label:"人员姓名"},{default:a(()=>[o(p,{modelValue:e.form.name,"onUpdate:modelValue":l[3]||(l[3]=t=>e.form.name=t),placeholder:"请输入人员姓名"},null,8,["modelValue"])]),_:1}),o(y,{prop:"role",label:"演职角色"},{default:a(()=>[o(h,{modelValue:e.form.role,"onUpdate:modelValue":l[4]||(l[4]=t=>e.form.role=t),placeholder:"请选择角色"},{default:a(()=>[o(_,{label:"导演",value:"导演"}),o(_,{label:"编剧",value:"编剧"}),o(_,{label:"主演",value:"主演"}),o(_,{label:"演员",value:"演员"})]),_:1},8,["modelValue"])]),_:1}),o(y,{prop:"avatar",label:"人员头像"},{default:a(()=>[o(M,{action:k(C)+"/files/upload","on-success":P,"list-type":"picture"},{default:a(()=>[o(s,{type:"primary"},{default:a(()=>l[11]||(l[11]=[n("点击上传")])),_:1})]),_:1},8,["action"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}};export{De as default};
